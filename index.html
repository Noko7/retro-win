<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RetroWin - Windows XP Desktop Experience</title>
  <meta name="description" content="Experience nostalgic Windows XP desktop with malware mini-game, live chat, and classic applications. A pixel-perfect recreation of early 2000s computing." />
  <meta name="keywords" content="windows xp, retro, desktop, malware game, nostalgia, 2000s, retro computing, chat, notepad, paint" />
  <meta name="author" content="Noko7" />
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://retro-win.vercel.app/" />
  <meta property="og:title" content="RetroWin - Windows XP Desktop Experience" />
  <meta property="og:description" content="Experience nostalgic Windows XP desktop with malware mini-game, live chat, and classic applications." />
  <meta property="og:image" content="https://retro-win.vercel.app/public/icons/xp-wallpaper.jpg" />
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://retro-win.vercel.app/" />
  <meta property="twitter:title" content="RetroWin - Windows XP Desktop Experience" />
  <meta property="twitter:description" content="Experience nostalgic Windows XP desktop with malware mini-game, live chat, and classic applications." />
  <meta property="twitter:image" content="https://retro-win.vercel.app/public/icons/xp-wallpaper.jpg" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="public/icons/Hopstarter-Mac-Folders-Windows.256.png" />
  
  <!-- Stylesheets -->
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="game.css" />
  <link rel="stylesheet" href="src/gameStyles.css" />
</head>

<body>
  <!-- BOOT SCREEN - Black background with red BEGIN button -->
  <div id="boot-screen">
    <div class="boot-content">
      <div class="enter-text">ENTER</div>
      <button id="begin-button" class="begin-btn">BEGIN</button>
    </div>
  </div>

  <!-- MALWARE GAME SCREEN - Hidden initially -->
  <div id="game-screen" style="display: none;">
    <div id="game-background"></div>
    <div id="popup-container"></div>
    <div id="game-ui">
      <div id="virus-counter">Viruses Remaining: <span id="virus-count">0</span></div>
      <div id="game-timer">Time: <span id="timer">00:00</span></div>
    </div>
    <audio id="game-audio" loop>
      <source src="public/music/Salinewin.exe_virus_beat.mp3" type="audio/mpeg">
    </audio>
  </div>

  <!-- MAIN DESKTOP - Hidden until game is complete -->
  <div id="main-desktop" style="display: none; background-image: url('public/icons/xp-wallpaper.jpg'); background-size: cover; background-position: center center; background-repeat: no-repeat; background-attachment: fixed;">
    <!-- flashing warning banner-->
    <div style="animation: flash 1s infinite;-webkit-animation: flash 1s infinite">
      <marquee behavior="scroll" direction="left" scrollamount="6" loop="-1"
               style="background:red;color:yellow;font-weight:bold;font-size:14px;
               padding:8px;text-shadow:1px 1px black;font-family:Tahoma,sans-serif">
        🚨 WARNING: There are hidden features on this site beyond man's comprehension. Some content may be harmful to people of neanderthaw decent. Please use with discression and compassion. 
      </marquee>
    </div>
    <script>
      /* simple flash key-frames for the marquee */
      const style = document.createElement('style');
      style.textContent = `@keyframes flash{0%{opacity:1;}50%{opacity:.4;}100%{opacity:1;}}`;
      document.head.appendChild(style);
    </script>

  <!--   THE DESKTOP   -->
  <div id="desktop">
    <div id="desktop-icons">
      <!-- Desktop icons are injected here by JS -->
    </div>

    <!-- Game Access Panel - Hidden initially -->
    <div id="game-access-panel" style="position: fixed; top: 10px; right: 10px; background: rgba(0,0,0,0.8); color: #00ff00; padding: 15px; border: 2px solid #00ff00; border-radius: 5px; font-family: 'Courier New', monospace; z-index: 1001; display: none;">
      <div style="text-align: center; margin-bottom: 10px;">
        <strong>🎮 DIGITAL DETECTIVE</strong>
      </div>
      <div style="font-size: 12px; margin-bottom: 10px;">
        Access the full investigation protocol
      </div>
      <button onclick="window.gameProgression.showLevelSelection()" style="background: #000; color: #00ff00; border: 1px solid #00ff00; padding: 5px 10px; cursor: pointer; font-family: 'Courier New', monospace; margin-right: 5px;">
        CASE FILES
      </button>
      <button onclick="window.restartMalwareGame()" style="background: #000; color: #00ff00; border: 1px solid #00ff00; padding: 5px 10px; cursor: pointer; font-family: 'Courier New', monospace;">
        QUICK SCAN
      </button>
    </div>

    <!-- ╔═ My Computer window ═╗ -->
    <div class="window draggable" style="top:200px;left:calc(50% - 250px);width:500px;">
      <div class="title-bar"><span class="title">My Computer</span>
        <span class="window-buttons">
          <button>_</button><button>[]</button><button>X</button>
        </span>
      </div>
      <div class="window-content">
        <table>
          <tr>
            <td><img class="folder-icon" src="public/icons/Hopstarter-Mac-Folders-Windows.256.png" />
              <br>About</td>
            <td>
              <a href="https://github.com/Noko7" target="_blank" style="text-decoration:none;color:inherit">
                <img class="folder-icon" src="public/icons/Hopstarter-Mac-Folders-Windows.256.png" />
                <br>Projects
              </a>
            </td>
            <td><img class="folder-icon" src="public/icons/Hopstarter-Mac-Folders-Windows.256.png" />
              <br>Cloud</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Notepad window (Windows XP style) -->
    <div class="window draggable notepad-window" style="top:100px;left:300px;width:600px;height:450px;display:none;">
      <div class="title-bar">
        <span class="title">Untitled - Notepad</span>
        <span class="window-buttons">
          <button onclick="minimizeNotepad()">_</button>
          <button onclick="maximizeNotepad()">□</button>
          <button onclick="closeNotepad()">X</button>
        </span>
      </div>
      <div class="window-content notepad-content">
        <!-- Notepad Menu Bar -->
        <div class="notepad-menu-bar">
          <div class="notepad-menu-item" onclick="toggleFileMenu()">File</div>
          <div class="notepad-menu-item" onclick="toggleEditMenu()">Edit</div>
          <div class="notepad-menu-item" onclick="toggleFormatMenu()">Format</div>
          <div class="notepad-menu-item" onclick="toggleViewMenu()">View</div>
          <div class="notepad-menu-item" onclick="toggleHelpMenu()">Help</div>
        </div>
        
        <!-- File Menu Dropdown -->
        <div id="file-menu" class="notepad-dropdown-menu" style="display:none;">
          <div class="menu-item" onclick="newFile()">New&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+N</div>
          <div class="menu-item" onclick="openFile()">Open...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+O</div>
          <div class="menu-item" onclick="saveFile()">Save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+S</div>
          <div class="menu-item" onclick="saveAsFile()">Save As...</div>
          <div class="menu-separator"></div>
          <div class="menu-item" onclick="pageSetup()">Page Setup...</div>
          <div class="menu-item" onclick="printFile()">Print...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ctrl+P</div>
          <div class="menu-separator"></div>
          <div class="menu-item" onclick="closeNotepad()">Exit</div>
        </div>
        
        <!-- Text Area -->
        <textarea id="notepad-textarea" class="notepad-textarea" placeholder="Start typing..."></textarea>
        
        <!-- Status Bar -->
        <div class="notepad-status-bar">
          <span id="notepad-status">Ready</span>
          <span id="notepad-position">Ln 1, Col 1</span>
        </div>
      </div>
    </div>

    <!-- Paint window (Windows XP style) -->
    <div class="window draggable" style="top:150px;left:150px;width:550px;height:400px;">
      <div class="title-bar">
        <span class="title">untitled – Paint</span>
        <span class="window-buttons">
          <button>_</button><button>[]</button><button>X</button>
        </span>
      </div>
      <div class="window-content" style="height:calc(100% - 28px);display:flex;flex-direction:column;">
        <!-- XP-style toolbar -->
        <div class="paint-toolbar-xp">
          <button class="paint-color-btn" data-color="red"    style="background:red"></button>
          <button class="paint-color-btn" data-color="blue"   style="background:blue"></button>
          <button class="paint-color-btn" data-color="green"  style="background:green"></button>
          <button class="paint-color-btn" data-color="yellow" style="background:yellow"></button>
          <button class="paint-color-btn" data-color="purple" style="background:purple"></button>
          <button class="paint-color-btn" data-color="orange" style="background:orange"></button>
          <button onclick="clearCanvas()" title="Clear Canvas" style="margin-left:16px;padding:0 10px;font-size:13px;border-radius:3px;border:1px solid #888;background:#ece9d8;cursor:pointer;">Clear</button>
        </div>
        <!-- Paint canvas -->
        <div style="flex:1;display:flex;align-items:center;justify-content:center;">
          <canvas id="paintCanvas" width="500" height="300"
                  style="border:1.5px solid #000;cursor:crosshair;background:#fff;box-shadow:2px 2px 6px #b5b5b5;"></canvas>
        </div>
      </div>
    </div>





    <!-- ╔═ Pop-ups ═╗ -->
    <div class="popup-window draggable" style="top:30px;left:50px;width:250px;">
      <div class="title-bar"><span class="title">Sponsored Forum</span>
        <span class="window-buttons"><button>_</button><button>[]</button><button>X</button></span>
      </div>
      <div class="window-content">🔥 Hot Topic: AI will replace humans ??</div>
    </div>

    <div class="popup-window draggable" style="top:100px;right:50px;width:250px;">
      <div class="title-bar"><span class="title">Download Manager</span>
        <span class="window-buttons"><button>_</button><button>[]</button><button>X</button></span>
      </div>
      <div class="window-content">
        💾 Your download is ready! Click
        <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0">here</a>.
      </div>
    </div>

    <div class="popup-window draggable" style="bottom:100px;left:100px;width:300px;height:300px;">
      <div class="title-bar"><span class="title">Live Chat Room</span>
        <span class="window-buttons"><button>_</button><button>[]</button><button>X</button></span>
      </div>
      <div class="window-content" style="display:flex;flex-direction:column;height:100%;">
        <div id="chatMessages"
             style="flex:1;overflow-y:auto;border:1px solid #000;padding:5px;background:#fff;font-size:12px">
          <div>👋 Chat?</div>
        </div>
        <div style="margin-top:10px;display:flex;">
          <input id="chatInput" type="text" placeholder="Type a message…"
                 style="flex:1;font-size:12px;padding:2px" />
          <button style="margin-left:5px;font-size:12px" onclick="sendMessage()">Send</button>
        </div>
      </div>
    </div>
    <script>
      /* tiny chat handler */
      function sendMessage(){
        const inp=document.getElementById('chatInput'),msg=inp.value.trim();
        if(!msg) return;
        const div=document.createElement('div');
        div.textContent=`You: ${msg}`;
        const box=document.getElementById('chatMessages');
        box.appendChild(div);
        box.scrollTop=box.scrollHeight;
        inp.value='';
      }
      document.getElementById('chatInput')
              .addEventListener('keydown',e=>e.key==='Enter'&&sendMessage());
    </script>

    <!-- ▄▄▄▄▄ TASK-BAR ▄▄▄▄▄ -->
    <div id="taskbar">
      <button id="start-button" class="xp-start-button">
        <img src="public/icons/Hopstarter-Mac-Folders-Windows.256.png" alt="Start" width="25" height="25" />
        <span class="start-text">Start</span>
      </button>
      <!-- dynamic window buttons appear here -->
      <div id="taskbar-windows"></div>
      <div id="clock"></div>
    </div>

  </div><!-- /desktop -->

  </div><!-- /main-desktop -->

  <!-- ⏰ live clock -->
  <script>
    function updateClock(){
      const now=new Date();
      document.getElementById('clock').textContent=
        now.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});
    }
    setInterval(updateClock,1000); updateClock();
  </script>

<!-- Game Scripts -->
<script src="src/popupGame.js"></script>
<script src="src/gameProgression.js"></script>
<script src="src/fileInvestigation.js"></script>
<script src="src/networkPuzzle.js"></script>
<script src="src/desktopIcons.js"></script>
<script src="src/paint.js"></script>
<script src="src/windows.js"></script>
<script src="src/notepad.js"></script>
<script src="src/chat.js"></script>
<script type="module">
  import StartMenu from './src/startMenu.js';
  // Make sure DOM is loaded before initializing
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      console.log('DOM ready, creating Start Menu');
      window.startMenu = new StartMenu();
    });
  } else {
    console.log('DOM already ready, creating Start Menu');
    window.startMenu = new StartMenu();
  }
</script>
</body>
</html>
